pipeline {
  agent any
  parameters {
    choice(
      name: 'ACTION',
      choices: ['deploy-stack', 'update-stack', 'delete-stack'],
      description: 'CloudFormation Actions'
    )
    choice(
      name: 'MyKeyName',
      choices: ['Moeez.Nv'],
      description: 'CloudFormation Actions'
    )
    choice(
      name: 'MyAvailabilityZone',
      choices: ['us-east-1a', 'us-east-1b', 'us-east-1c'],
      description: 'CloudFormation Actions'
    )    
    choice(
      name: 'MyInstanceType',
      choices: ['t2.micro', 't2.small', 't3.micro'],
      description: 'CloudFormation Actions'
    )   
  }

  stages { 

        stage('deploy-stack') {
        when {
            expression { params.ACTION == 'deploy-stack' }
        }
        steps {
        sh "aws cloudformation create-stack --stack-name jenkinstest --template-body file://Word.yml --region 'us-east-1'"
        }
    }

        stage('update-stack') {
        when {
            expression { params.ACTION == 'update-stack' }
        }
        steps {
        sh "aws cloudformation update-stack --stack-name jenkinstest --template-body file://Word.yml --region 'us-east-1'"    
        }
    }

        stage('delete-stack') {
        when {
            expression { params.ACTION == 'delete-stack' }
        }
        steps {
        sh "aws cloudformation delete-stack --stack-name jenkinstest --region 'us-east-1'"    
        }
    }
  }
}
