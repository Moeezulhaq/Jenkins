pipeline {
  agent any
  parameters {
    choice(
      name: 'ACTION',
      choices: ['create-changeset', 'deploy-stack', 'delete-stack'],
      description: 'CloudFormation Actions'
    )
  }

  stages { 

    stage('deploy-stack') {
      when {
        expression { params.ACTION == 'deploy-stack' }
      }
      steps {
      sh "aws cloudformation create-stack --stack-name jenkinstest --template-body file://Word.yml --region 'us-east-1'"
    }
  }
    
    stage('create-changeset') {
      when {
        expression { params.ACTION == 'create-changeset' }
      }
      steps {
      sh "aws cloudformation update-stack --stack-name jenkinstest --template-body file://Word.yml --region 'us-east-1'"    
    }
  }


    stage('delete-stack') {
      when {
        expression { params.ACTION == 'delete-stack' }
      }
      steps {
      sh "aws cloudformation delete-stack --stack-name jenkinstest --region 'us-east-1'"    
    }
  }



  }
}